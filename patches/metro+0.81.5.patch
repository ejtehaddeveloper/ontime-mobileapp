diff --git a/node_modules/metro/src/lib/getMaxWorkers.js.flow b/node_modules/metro/src/lib/getMaxWorkers.js.flow
index 3b75786..c17bc2d 100644
--- a/node_modules/metro/src/lib/getMaxWorkers.js.flow
+++ b/node_modules/metro/src/lib/getMaxWorkers.js.flow
@@ -15,7 +15,7 @@ const os = require('os');
 
 module.exports = (workers: ?number): number => {
   // $FlowFixMe[prop-missing] Missing Flow lib def for availableParallelism
-  const cores = os.availableParallelism();
+  const cpus = os.availableParallelism ? os.availableParallelism() : os.cpus().length;
   return typeof workers === 'number' && Number.isInteger(workers)
     ? Math.min(cores, workers > 0 ? workers : 1)
     : Math.max(1, Math.ceil(cores * (0.5 + 0.5 * Math.exp(-cores * 0.07)) - 1));
